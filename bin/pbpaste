#!/bin/sh

if [ -e /usr/bin/pbpaste ]; then
    exec /usr/bin/pbpaste "$@"
else
    if [ -n "$WAYLAND_DISPLAY" ]; then
        exec wl-paste -n
    elif [ -n "$DISPLAY" ]; then
        exec xsel -ob
    elif [ -n "$TMUX" ]; then
        exec tmux saveb -
    elif [ -n "$SSH_CLIENT" ] && timeout 1 curl -s -f 10.0.2.2:8000/http-board-ping >/dev/null 2>&1; then
        curl -s 10.0.2.2:8000/api | jq -j .text
    else
        :
    fi
fi
